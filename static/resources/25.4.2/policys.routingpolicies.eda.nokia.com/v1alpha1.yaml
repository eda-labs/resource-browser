name: v1alpha1
schema:
  openAPIV3Schema:
    description: Policy is the Schema for the policys API
    properties:
      apiVersion:
        description: |-
          APIVersion defines the versioned schema of this representation of an object.
          Servers should convert recognized schemas to the latest internal value, and
          may reject unrecognized values.
          More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
        type: string
      kind:
        description: |-
          Kind is a string value representing the REST resource this object represents.
          Servers may infer this from the endpoint the client submits requests to.
          Cannot be updated.
          In CamelCase.
          More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
        type: string
      metadata:
        type: object
      spec:
        description: Policy defines a set of rules and actions to manage network traffic or routing behavior, with statements that include matching conditions and actions, such as accepting or rejecting routes, or modifying route attributes like BGP parameters.
        properties:
          defaultAction:
            description: The default action to apply if no other actions are defined.
            properties:
              bgp:
                description: Actions related to the BGP protocol.
                properties:
                  asPathPrepend:
                    description: AS number to prepend to the AS Path attributes.
                    format: int32
                    maximum: 4294967295
                    minimum: 1
                    type: integer
                  asPathRemove:
                    description: Clear the AS path to make it empty.
                    type: boolean
                  asPathReplace:
                    description: Replace the existing AS path with a new AS_SEQUENCE containing the listed AS numbers.
                    items:
                      format: int32
                      type: integer
                    type: array
                  localPreference:
                    description: Set a new LOCAL_PREF value for matching BGP routes.
                    format: int32
                    maximum: 4294967295
                    minimum: 0
                    type: integer
                  setOrigin:
                    description: Set a new ORIGIN attribute for matching BGP routes.
                    enum:
                      - egp
                      - igp
                      - incomplete
                    type: string
                type: object
              policyResult:
                description: Final disposition for the route.
                enum:
                  - accept
                  - reject
                type: string
            type: object
          statement:
            description: List of policy statements.
            items:
              properties:
                action:
                  description: Actions for routes that match the policy statement.
                  properties:
                    bgp:
                      description: Actions related to the BGP protocol.
                      properties:
                        asPathPrepend:
                          description: AS number to prepend to the AS Path attributes.
                          format: int32
                          maximum: 4294967295
                          minimum: 1
                          type: integer
                        asPathRemove:
                          description: Clear the AS path to make it empty.
                          type: boolean
                        asPathReplace:
                          description: Replace the existing AS path with a new AS_SEQUENCE containing the listed AS numbers.
                          items:
                            format: int32
                            type: integer
                          type: array
                        localPreference:
                          description: Set a new LOCAL_PREF value for matching BGP routes.
                          format: int32
                          maximum: 4294967295
                          minimum: 0
                          type: integer
                        setOrigin:
                          description: Set a new ORIGIN attribute for matching BGP routes.
                          enum:
                            - egp
                            - igp
                            - incomplete
                          type: string
                      type: object
                    policyResult:
                      description: Final disposition for the route.
                      enum:
                        - accept
                        - reject
                      type: string
                  type: object
                match:
                  description: Match conditions of the policy statement.
                  properties:
                    bgp:
                      description: Configuration for BGP-specific policy match criteria.
                      properties:
                        communitySet:
                          description: Match conditions for BGP communities.
                          type: string
                        evpnRouteType:
                          description: Match conditions for EVPN route types.
                          items:
                            type: integer
                          type: array
                      type: object
                    family:
                      description: Address families that the route belongs to.
                      items:
                        type: string
                      type: array
                    prefixSet:
                      description: Reference to a PrefixSet resource.
                      type: string
                    protocol:
                      description: The route protocol type to match.
                      enum:
                        - AGGREGATE
                        - ARP_ND
                        - BGP
                        - BGP_EVPN
                        - DHCP
                        - GRIBI
                        - HOST
                        - ISIS
                        - LOCAL
                        - LINUX
                        - NDK1
                        - NDK2
                        - OSPFV2
                        - OSPFV3
                        - STATIC
                      type: string
                  type: object
                name:
                  description: Name of the policy statement.
                  type: string
              required:
                - name
              type: object
            type: array
        type: object
      status:
        description: PolicyStatus defines the observed state of Policy.
        type: object
    type: object
served: true
storage: true
subresources:
  status: {}
